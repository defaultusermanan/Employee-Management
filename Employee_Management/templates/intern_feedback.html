{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> 
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
    <title>Feedback Form in HTML Example</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <style>
        .unchecked {
            color: blanchedalmond;
        }

        .checked {
            color: black;
        }
        .custom-button {
            display: inline-block;
            padding: 10px 20px;
            font-size: 16px;
            color: #fff;
            background-color: #000;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            text-decoration: none;
            float:right;
            margin-right:20px;
            }
            .slider-container {
                display: flex;
                align-items: center;
                gap: 10px;
              }
              
              .slider-value {
                font-weight: bold;
              }
              
              /* Customized slider styles */
              input[type="range"] {
                width: 650px;
              }
              
              input[type="range"]::-webkit-slider-thumb {
                width: 20px;
                height: 20px;
              }
              .slider-container {
                display: flex;
                align-items: center;
                gap: 10px;
              }
              
              .slider-value {
                font-weight: bold;
              }
              
              /* Customized slider styles */
              .slider-container {
                display: flex;
                align-items: center;
                gap: 10px;
              }
              
              .slider-value {
                font-weight: bold;
              }
              
              /* Customized slider styles */
              input[type="range"] {
                width: 96%; /* Adjust the width as desired */
                border-radius: 10px;
                -webkit-appearance: none;
                background-color: #ddd;
                height: 10px;
              }
              
              input[type="range"]::-webkit-slider-thumb {
                width: 20px;
                height: 20px;
                border-radius: 50%;
                background-color: #888;
                cursor: pointer;
                -webkit-appearance: none;
                margin-top: -5px;
              }
              
              input[type="range"]::-moz-range-thumb {
                width: 20px;
                height: 20px;
                border-radius: 50%;
                background-color: #888;
                cursor: pointer;
                margin-top: -5px;
              }
              
              button[type="submit"] {
                border-radius: 50%;
                width: 30px;
                height: 30px;
              }
              /* Progress bar container */
.progress-bar-container {
  background-color: #f1f1f1;
  border-radius: 10px;
  margin: 20px 0;
  height: 30px;
  display: flex;
  align-items: center;
}

/* Progress bar */
.progress-bar {
  height: 100%;
  border-radius: 10px;
  transition: width 0.2s;
}

/* Progress value */
.progress-value {
  font-weight: bold;
  margin-left: 10px;
}

/* Custom progress bar colors based on the average value */
.progress-bar.green {
  background-color: #4caf50;
}

.progress-bar.yellow {
  background-color: #f0ad4e;
}

.progress-bar.red {
  background-color: #d9534f;
}

    </style>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
    <!--<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz" crossorigin="anonymous"></script>-->
    <meta name="author" content="Codeconvey" />
    
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    <!--Only for demo purpose - no need to add.-->
  <link rel="stylesheet" href="{% static 'css/demo.css' %}" 
	
</head>
<body>
		
<div class="ScriptTop">
    <div class="rt-container">
        <div class="col-rt-4" id="float-right" >            
        </div>
        <div class="col-rt-2">
            <ul>
            </ul>
        </div>
    </div>
</div>

<header class="ScriptHeader">
    <div class="rt-container">
    	<div class="col-rt-12">
        	<div class="rt-heading">
            	<h1>Feedback Form</h1>
            </div>
        </div>
    </div>
</header>

<section>
    <div class="rt-container">
          <div class="col-rt-12">
              <div class="Scriptcontent">
              
       
<div class="feedback">
<form action="{% url 'feedback_form' %}" enctype="multipart/form-data" method ="POST">
    {% csrf_token %}
        <select class="form-select" name="employee" id="employee" disabled>
            <option value="" selected disabled>Intern's name</option>
            {% for employee in employeesDropdown %}
            <option value="{{ employee }}">{{ employee }}</option>
            {% endfor %}
        </select><br>
        <select class="form-select" name="manager" id="manager" disabled>
            <option value="" selected disabled>Mentor's name</option>
            {% for manager in managersDropdown %}
            <option value="{{ manager }}">{{ manager }}</option>
            {% endfor %}
        </select><br> 
        <div class="clear"></div>
        <hr class="survey-hr">
        <div class="progress-bar-container">
          <div class="progress-bar" id="progressBar"></div>
          <span class="progress-value" id="progressValue">0</span>
        </div>
        <div class="clear"></div>
        <hr class="survey-hr">
        <div class="question">
            <label for="behavior">1. Expert In solving complex problems:</label><br>
            <input type="range" id="behavior" min="0" max="10" step="0.1" value="0">
            <span class="slider-value">0</span>
        </div>
        <div class="clear"></div>
        <hr class="survey-hr">
        <div class="question">
            <label for="deadlines">2. Ready to take new initiatives and applies different appraoch to solve problems:</label><br>
            <input type="range" id="deadlines"  min="0" max="10" step=".1" value="0">
            <span class="slider-value">0</span>
        </div>
        <div class="clear"></div>
        <hr class="survey-hr">    
        <div class="question">
            <label for="performance">3. Take ownership of work and delivers it on time:</label><br>
            <input type="range" id="performance" min="0" max="10" step=".1" value="0">
            <span class="slider-value">0</span>
        </div>
        <div class="clear"></div>
        <hr class="survey-hr">   
        <div class="question">
            <label for="humble">4. Ready to work with associates and trains them humble:</label><br>
            <input type="range" id="humble" min="0" max="10" step=".1" value="0">
            <span class="slider-value">0</span>
        </div>
        <div class="clear"></div>
        <hr class="survey-hr">   
        <div class="question">
            <label for="instructions">5. Listens to instructions from Manager/Mentor expers in Django:</label><br>
            <input type="range" id="instructions" min="0" max="10" step=".1" value="0">
            <span class="slider-value">0</span>
        </div>
        <div class="clear"></div>
        <hr class="survey-hr">   
        <div class="question">
            <label for="induction">6. Completed all induction tasks:</label><br>
            <input type="range" id="induction" min="0" max="10" step=".1" value="0">
            <span class="slider-value">0</span>
        </div>
        <div class="clear"></div>
        <hr class="survey-hr">   
        <div class="question">
            <label for="frontend">7. Expert in FrontEnd:</label><br>
            <input type="range" id="frontend" min="0" max="10" step=".1" value="0">
            <span class="slider-value">0</span>
        </div>
        <div class="clear"></div>
        <hr class="survey-hr">   
        <div class="question">
            <label for="api">8. Expert in APIs:</label><br>
            <input type="range" id="api" min="0" max="10" step=".1" value="0">
            <span class="slider-value">0</span>
        </div>
        <div class="clear"></div>
        <hr class="survey-hr">   
        <div class="question">
            <label for="handholding">9. No handholding is required:</label><br>
            <input type="range" id="handholding" min="0" max="10" step=".1" value="0">
            <span class="slider-value">0</span>
        </div>
        <div class="clear"></div>
        <hr class="survey-hr">   
        <div class="question">
            <label for="multiple">10. He/She can work on multiple projects at same time:</label><br>
            <input type="range" id="multiple" min="0" max="10" step=".1" value="0">
            <span class="slider-value">0</span>
        </div>
        <div class="clear"></div>
        <hr class="survey-hr">   
        <div class="question">
            <label for="team">11. Multiple people will try to get him/her in team:</label><br>
            <input type="range" id="team" min="0" max="10" step=".1" value="0">
            <span class="slider-value">0</span>
        </div>
        <div class="clear"></div>
        <hr class="survey-hr">   
        <div class="question">
            <label for="dedication">12. Dedication towards work:</label><br>
            <input type="range" id="dedication" min="0" max="10" step=".1" value="0">
            <span class="slider-value">0</span>
        </div>
        <div class="clear"></div>
        <hr class="survey-hr">   
        <div class="question">
            <label for="aws">13. AWS Services:</label><br>
            <input type="range" id="aws" min="0" max="10" step=".1" value="0">
            <span class="slider-value">0</span>
        </div>
        <div class="clear"></div>
        <hr class="survey-hr">   
        <div class="question">
            <label for="sql">14. SQL:</label><br>
            <input type="range" id="sql" min="0" max="10" step=".1" value="0">
            <span class="slider-value">0</span>
        </div>
        <div class="clear"></div>
        <hr class="survey-hr">   
        <div class="question">
            <label for="power">15. Power BI:</label><br>
            <input type="range" id="power" min="0" max="10" step=".1" value="0">
            <span class="slider-value">0</span>
        </div>
        <div class="clear"></div>
        <hr class="survey-hr">                
            <label for="commentText">Scope of Improvement (Will be shared with employees):</label><br><br>
            <textarea cols="750" name="commentText3" id="commentText3" rows="4" style="width: 100%; resize:none"></textarea><br><br>
            <div class="clear"></div>
        <div class="clear"></div>
        <hr class="survey-hr">
    <div class="clear"></div>
    <input style="background:#43a7d5;color:#fff;padding:12px;border:0" type="submit" value="Submit your review">&nbsp;
</form>
</div>

</div>
</div>
</div>
</section>
     
<script>
  document.addEventListener('DOMContentLoaded', () => {
    const sliders = document.querySelectorAll('input[type="range"]');
    const sliderValues = document.querySelectorAll('.slider-value');
    const progressBar = document.getElementById('progressBar');
    const progressValue = document.getElementById('progressValue');

    function calculateAverage() {
        let total = 0;
        sliders.forEach((slider) => {
            total += parseFloat(slider.value);
        });
        const average = total / sliders.length;
        return average.toFixed(1); // Limit to one decimal place
    }

    function updateProgressBar() {
        const averageValue = calculateAverage();
        const percentage = (averageValue / 10) * 100; // Convert the average value to percentage (assuming the range is from 0 to 10)
    progressBar.style.width = `${Math.min(100, Math.max(0, percentage))}%`; // Ensure the width stays between 0% and 100%
        progressValue.textContent = `${averageValue}`;

        // Change the color of the progress bar based on the average value
        progressBar.classList.remove('green', 'yellow', 'red');
        if (averageValue >= 8) {
            progressBar.classList.add('green');
        } else if (averageValue >= 6) {
            progressBar.classList.add('yellow');
        } else {
            progressBar.classList.add('red');
        }
    }

    sliders.forEach((slider, index) => {
        slider.addEventListener('input', () => {
            sliderValues[index].textContent = slider.value;
            updateProgressBar();
        });

        slider.addEventListener('mousemove', (event) => {
            const value = slider.value;
            const tooltip = document.createElement('div');
            tooltip.textContent = value;
            tooltip.classList.add('slider-tooltip');
            tooltip.style.left = `${event.clientX + 10}px`;
            tooltip.style.top = `${event.clientY - 30}px`;
            document.body.appendChild(tooltip);

            slider.addEventListener('mouseout', () => {
                tooltip.remove();
            });
        });
    });

    const form = document.getElementById('feedbackForm');
    form.addEventListener('submit', (event) => {
        event.preventDefault();
        // Your form submission logic and console logs go here
        form.reset();
        sliderValues.forEach((value) => {
            value.textContent = '0';
        });
        updateProgressBar(); // Reset the progress bar
    });

    // Initialize the progress bar to 0%
    updateProgressBar();
});

        
</script>
    
</body>
</html>

